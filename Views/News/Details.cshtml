@model QLBDN.Models.News

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = Model.Title;
}

@section Styles {
<style>
    .news-container {
        max-width: 900px;
        margin: 0 auto;
        padding: 1rem;
        animation: fadeIn .35s ease;
    }

    .news-title {
        font-size: 2.2rem;
        font-weight: 800;
        color: #0f172a;
        margin-bottom: 1rem;
        line-height: 1.3;
    }

    .news-meta {
        color: #64748b;
        font-size: .9rem;
        margin-bottom: 1.5rem;
        display: flex;
        gap: 1.5rem;
        align-items: center;
    }

    .news-image {
        width: 100%;
        max-height: 450px;
        object-fit: cover;
        border-radius: 16px;
        margin-bottom: 2rem;
        background: #e2e8f0;
        box-shadow: 0 4px 20px rgba(0,0,0,.08);
    }

    /* N·ªôi dung */
    .news-content {
        font-size: 1.15rem;
        line-height: 1.75;
        color: #334155;
        margin-bottom: 3rem;
    }

    .news-content p {
        margin-bottom: 1rem;
    }

    .news-content img {
        width: 100%;
        border-radius: 12px;
        margin: 1rem 0;
    }

    /* Comment Section */
    .comment-section {
        margin-top: 2rem;
        padding: 1.8rem;
        border-radius: 16px;
        background: white;
        border: 1px solid #e2e8f0;
        box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    }

    .comment-title {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 1.2rem;
        color: #059669;
        display: flex;
        align-items: center;
        gap: .5rem;
    }

    .comment-item {
        padding: .9rem 0;
        border-bottom: 1px solid #e2e8f0;
    }

    .comment-item:last-child {
        border-bottom: none;
    }

    .comment-user {
        font-weight: 700;
        color: #0f172a;
    }

    .comment-date {
        font-size: .78rem;
        color: #94a3b8;
        margin-left: .5rem;
    }

    .comment-text {
        margin-top: .4rem;
        color: #334155;
        white-space: pre-line;
    }

    .btn-back {
        display: inline-block;
        margin-top: 1.8rem;
        font-weight: 600;
        text-decoration: none;
        color: #64748b;
    }

    .btn-back:hover {
        color: #059669;
    }

    @@keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to   { opacity: 1; transform: translateY(0); }
    }
</style>
}

<div class="news-container">

    <!-- TI√äU ƒê·ªÄ -->
    <h1 class="news-title">@Model.Title</h1>

    <!-- META -->
    <div class="news-meta">
        <span>üïí @Model.PostedDate?.ToString("dd/MM/yyyy HH:mm")</span>
        <span>‚úçÔ∏è @(Model.User?.Username ?? "H·ªá th·ªëng")</span>
    </div>

    <!-- ·∫¢NH -->
    <img src="@(string.IsNullOrEmpty(Model.ImageUrl)
                ? "/images/default-news.jpg"
                : Model.ImageUrl)"
         alt="thumbnail"
         class="news-image" />

    <!-- N·ªòI DUNG -->
    <div class="news-content">
        @Html.Raw(Model.Content)
    </div>

    <!-- B√åNH LU·∫¨N -->
    <div class="comment-section">
        <div class="comment-title">üí¨ B√¨nh lu·∫≠n (@Model.Interactions.Count)</div>

        @if (!Model.Interactions.Any())
        {
            <p class="text-muted">Ch∆∞a c√≥ b√¨nh lu·∫≠n n√†o.</p>
        }
        else
        {
            foreach (var c in Model.Interactions.OrderByDescending(i => i.DateTime))
            {
                <div class="comment-item">
                    <span class="comment-user">@c.User?.Username ?? "·∫®n danh"</span>
                    <span class="comment-date">@c.DateTime?.ToString("dd/MM/yyyy HH:mm")</span>

                    <div class="comment-text">@c.Content</div>
                </div>
            }
        }
    </div>

    <a asp-action="Index" class="btn-back">‚Üê Quay l·∫°i danh s√°ch</a>
</div>
